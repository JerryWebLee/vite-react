# Docker éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®æä¾›äº†å®Œæ•´çš„DockeråŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œæ”¯æŒç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

- `Dockerfile` - ç”Ÿäº§ç¯å¢ƒå¤šé˜¶æ®µæ„å»ºæ–‡ä»¶
- `Dockerfile.dev` - å¼€å‘ç¯å¢ƒæ„å»ºæ–‡ä»¶
- `docker-compose.yml` - Docker Composeé…ç½®æ–‡ä»¶
- `nginx/docker.conf` - ä¼˜åŒ–çš„nginxé…ç½®
- `.dockerignore` - Dockeræ„å»ºå¿½ç•¥æ–‡ä»¶
- `deploy.sh` - è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x deploy.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨Docker Compose

```bash
# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
docker-compose up -d

# å¼€å‘ç¯å¢ƒéƒ¨ç½²
docker-compose --profile dev up -d
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨æ„å»º

```bash
# æ„å»ºé•œåƒ
docker build -t vite-react-app:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name vite-react-app \
  --restart unless-stopped \
  -p 3081:3081 \
  vite-react-app:latest
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç«¯å£é…ç½®

- åº”ç”¨é»˜è®¤è¿è¡Œåœ¨ `3081` ç«¯å£
- å¯é€šè¿‡ä¿®æ”¹ `docker-compose.yml` æˆ– `deploy.sh` ä¸­çš„ç«¯å£æ˜ å°„æ¥æ›´æ”¹

### ç¯å¢ƒå˜é‡

- `NODE_ENV`: ç¯å¢ƒæ¨¡å¼ï¼ˆproduction/developmentï¼‰
- å¯åœ¨ `docker-compose.yml` ä¸­æ·»åŠ æ›´å¤šç¯å¢ƒå˜é‡

### APIä»£ç†é…ç½®

nginxé…ç½®ä¸­çš„APIä»£ç†åœ°å€ä¸º `http://192.188.4.97:53090`ï¼Œè¯·æ ¹æ®å®é™…åç«¯æœåŠ¡åœ°å€ä¿®æ”¹ `nginx/docker.conf` æ–‡ä»¶ä¸­çš„ `proxy_pass` é…ç½®ã€‚

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å¤šé˜¶æ®µæ„å»º

- ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå‡å°‘æœ€ç»ˆé•œåƒå¤§å°
- æ„å»ºé˜¶æ®µä½¿ç”¨Node.jsï¼Œç”Ÿäº§é˜¶æ®µä½¿ç”¨nginx

### ç¼“å­˜ä¼˜åŒ–

- é™æ€èµ„æºè®¾ç½®é•¿æœŸç¼“å­˜
- HTMLæ–‡ä»¶ä¸ç¼“å­˜ï¼Œç¡®ä¿SPAè·¯ç”±æ­£å¸¸å·¥ä½œ

### å‹ç¼©ä¼˜åŒ–

- å¯ç”¨gzipå‹ç¼©
- æ”¯æŒå¤šç§æ–‡ä»¶ç±»å‹å‹ç¼©

## ğŸ”’ å®‰å…¨é…ç½®

- ä½¿ç”¨érootç”¨æˆ·è¿è¡Œnginx
- æ·»åŠ å®‰å…¨å“åº”å¤´
- é…ç½®CORSå’ŒXSSä¿æŠ¤

## ğŸ› æ•…éšœæ’é™¤

### æŸ¥çœ‹å®¹å™¨æ—¥å¿—

```bash
docker logs vite-react-app
```

### è¿›å…¥å®¹å™¨è°ƒè¯•

```bash
docker exec -it vite-react-app sh
```

### æ£€æŸ¥å®¹å™¨çŠ¶æ€

```bash
docker ps
docker stats vite-react-app
```

### å¥åº·æ£€æŸ¥

å®¹å™¨å†…ç½®å¥åº·æ£€æŸ¥ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š

```bash
docker inspect vite-react-app | grep Health -A 10
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. ç¡®ä¿æœåŠ¡å™¨å·²å®‰è£…Dockerå’ŒDocker Compose
2. ç¡®ä¿3081ç«¯å£æœªè¢«å ç”¨
3. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰è¯·ä¿®æ”¹APIä»£ç†åœ°å€
4. å»ºè®®ä½¿ç”¨HTTPSåœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²

## ğŸ”„ æ›´æ–°éƒ¨ç½²

```bash
# åœæ­¢å¹¶åˆ é™¤æ—§å®¹å™¨
docker-compose down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

æˆ–è€…ç›´æ¥ä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼š

```bash
./deploy.sh
```
